version: '3.8'

services:
  homie:
    build: .
    ports:
      - '3000:3000'
    environment:
      - HOME_ASSISTANT_URL=${HOME_ASSISTANT_URL}
      - HOME_ASSISTANT_TOKEN=${HOME_ASSISTANT_TOKEN}
      - JELLYFIN_URL=${JELLYFIN_URL}
      - JELLYFIN_API_KEY=${JELLYFIN_API_KEY}
      - JELLYFIN_USERNAME=${JELLYFIN_USERNAME}
      - JELLYFIN_PASSWORD=${JELLYFIN_PASSWORD}
      - NEXT_PUBLIC_JELLYFIN_URL=${JELLYFIN_URL}
      - NEXT_PUBLIC_JELLYFIN_API_KEY=${JELLYFIN_API_KEY}
      # Eero network integration - path to session cookie inside container
      - EERO_COOKIE_PATH=/app/data/eero-session.cookie
    volumes:
      # Mount directory for persistent Eero session cookie
      - ./data:/app/data
    restart: unless-stopped
